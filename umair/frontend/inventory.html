<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Pantry - Inventory</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>





    <!-- javascript  -->
    <script>
        // Function to add item from input fields
        function addItemFromInput() {
            const name = document.getElementById("itemName").value;
            const quantity = document.getElementById("itemQuantity").value;
            const expirationDate = document.getElementById("itemExpiration").value; // Correct ID now
            addItem(name, quantity, expirationDate);
        }

    
        // Function to add item
        // Function to add item with expiration date
        async function addItem(name, quantity, expirationDate) {
            try {
                const response = await fetch("http://127.0.0.1:5000/inventory", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ 
                        name: name, 
                        quantity: quantity, 
                        expiration_date: expirationDate // Include expiration date
                    }),
                });

                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }

                const data = await response.json();
                console.log("Item added:", data);
                fetchInventory();  // Refresh the inventory list

            } catch (error) {
                console.error("Error adding item:", error);
            }
        }

        // Function to display inventory in a vertical list (card format)
        async function fetchInventory() {
            try {
                const response = await fetch("http://127.0.0.1:5000/inventory");
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                const data = await response.json();
                const inventoryList = document.getElementById("inventoryList");
                inventoryList.innerHTML = "";  // Clear old data

                data.inventory.forEach(item => {
                    if (item.name && item.quantity && item.expiration_date) {  // Ensure all fields exist
                        const itemCard = document.createElement("div");
                        itemCard.classList.add("item-card"); // Add a class for styling
                        
                        itemCard.innerHTML = `
                            <h3>${item.name}</h3>
                            <p><strong>Quantity:</strong> ${item.quantity}</p>
                            <p><strong>Expires on:</strong> ${item.expiration_date}</p>
                        `;

                        inventoryList.appendChild(itemCard);
                    }
                });
            } catch (error) {
                console.error("Error fetching inventory:", error);
            }
        }
    </script>






    <div class="container">
        <nav>
            <h1>Smart Pantry</h1>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="inventory.html" class="active">Inventory</a></li>
                <li><a href="recipes.html">Recipes</a></li>
                <li><a href="notifications.html">Notifications</a></li>
            </ul>
        </nav>
        <header class="banner">
            <div class="overlay">
                <h1 class="title">Smart Kitchen</h1>
                <p class="subtitle">Your Intelligent Cooking Assistant</p>
            </div>
        </header>

        <section class="inventory">
            <h2>Pantry Inventory</h2>

            <div class="input-box">
                <input type="text" id="itemName" placeholder="Item Name">
                <input type="number" id="itemQuantity" placeholder="Quantity">
                <input type="date" id="itemExpiration">
                <button onclick="addItemFromInput()">Add Item <i class="fas fa-plus"></i></button>
            </div>

            <div class="input-box">
                <input type="text" id="removeName" placeholder="Item Name to Remove">
                <button onclick="removeItem()" class="remove-btn">Remove Item <i class="fas fa-trash"></i></button>
            </div>

            <button class="view-btn" onclick="fetchInventory()">View All Items <i class="fas fa-list"></i></button>

            <div class="inventory-list" id="inventoryList">
                <!-- Items will be dynamically displayed here -->
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>
